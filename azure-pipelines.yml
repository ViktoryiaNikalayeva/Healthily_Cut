parameters:
 - name: browser
   type: string
   default: chrome
   values: [chrome, firefox]
trigger:
  - none

jobs:
- job: build
  displayName: build
  pool: default

  steps: 
  - task: Maven@3
    inputs:
     mavenPomFile: 'pom.xml'
     publishJUnitResults: true
     testResultsFiles: '**/allure-reports/TEST-*.xml'
     javaHomeOption: 'JDKVersion'
     mavenVersionOption: 'Default'
     mavenAuthenticateFeed: false
     effectivePomSkip: false
     sonarQubeRunAnalysis: false
     options: '-DbrowserName=${{values}}'
     goals: 'clean test'
  
  - task: AllureGenerate@1
    continueOnError: true
    inputs:
     resultsDir: 'allure-results'
     targetDir: 'allure-report/$(Build.BuildNumber)'